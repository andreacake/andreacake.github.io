<html>
  <head>
    <title>Andrea Cake</title>
    <meta name="viewport" content="width=device-width; initial-scale=1.0;"/>

  </head>

  <h1>Andrea Cake</h1>
  <p> Cake ordering for Andrea Cake </p>


  <div id='stepOne'>
  <form id='cakeForm'>

    <fieldset>
      <legend>Name</legend>
      <input name='name' id='customerName' placeholder='John Doe'></input>
    </fieldset>
    
    <fieldset>
      <legend>Step One: Select Size</legend>
      <table>
        <tr>
          <td>
            <input type='radio' name='size' value='small' />
            <label for='small'>Small</label><br>
          </td>
          <td>8 Servings</td>
          <td>8"</td>
          <td>Â£30-40</td>
        </tr>
        <tr>
          <td>
            <input type='radio' name='size' value='medium' />
            <label for='small'>Medium</label><br>
          </td>
          <td>12 Servings</td>
          <td>10"</td>
          <td>Â£40-50</td>
        </tr>
        <tr>
          <td>
            <input type='radio' name='size' value='large' />
            <label for='large'>Large</label><br>
          </td>
          <td>16 Servings</td>
          <td>10"</td>
          <td>Â£50-60+</td>
        </tr>


      </table>
      <!--
      <input type='radio' name='size' value='medium' />
      <label for='medium'>Medium ~ 12 Servings ~ 10in ~ Â£40-50</label><br>
      <input type='radio' name='size' value='large' />
      <label for='large'>Large ~ 16 Servings ~ 12in ~ Â£50-60+</label><br>
 -->
    </fieldset>
    
    <fieldset>
      <legend>Step Two: Select Flavour</legend>
      <!-- TODO: <p> Select up to two flavours </p> -->
      <input type='radio' name='flavour' value='chocolate' />
      <label for='chocolate'>Chocolate</label><br>
      <input type='radio' name='flavour' value='vanilla' />
      <label for='vanilla'>Vanilla</label><br>
      <input type='radio' name='flavour' value='caramel' />
      <label for='caramel'>Caramel</label><br>
      <input type='radio' name='flavour' value='blueberry' />
      <label for='blueberry'>Blueberry</label><br>
      <input type='radio' name='flavour' value='strawberry' />
      <label for='strawberry'>Strawberry</label><br>
      <input type='radio' name='flavour' value='raspberry' />
      <label for='raspberry'>Raspberry</label><br>
      <input type='radio' name='flavour' value='nutella' />
      <label for='nutella'>Nutella</label><br>
    </fieldset>

    <fieldset>
      <legend>Step Three: Select Decorations</legend>
      <input type='radio' name='decorations' value='fruits' />
      <label for='fruits'>Fresh Fruits</label><br> 
      <input type='radio' name='decorations' value='chocolate' />
      <label for='chocolate'>Fancy Chocolate</label><br>
      <input type='radio' name='decorations' value='ornaments' />
      <label for='ornaments'>Cream Ornaments & Flowers</label><br> 
      <input type='radio' name='decorations' value='custom' />
      <label for='custom'>By Own Choice (Discuss through Messneger)</label><br> 
    </fieldset>

    <!-- TODO: Make date field-->

    <fieldset>
      <legend>Further Comments</legend>
      <textarea placeholder="Cake for my son's birthday!" id='specialMessage' name='comment'></textarea>
    </fieldset>

  </form>
    <button onClick='sendMail()'>Send</button>
  </div>

  <div id='stepTwo'>
    <h1>Thank You! ðŸŽ‰</h1>
    <p>I will be in touch with you very soon through Messenger!</p>
    <p>You can contact me through Facebook <a href=''>here</a> or through my e-mail, andrea.kondrotova@gmail.com</p>


  </div>



</html>
<script src="https://smtpjs.com/v3/smtp.js">
</script>

<script>
  function sendMail() {
      var subject;
      var body;

      var name = document.getElementById('customerName').value;
      if (name == '') {
          name = 'Customer'
      }

      subject = 'New Cake Request from ' + name;

      var form = document.getElementById('cakeForm');
      var size = form.elements['size'].value;
      var flavour = form.elements['flavour'].value;
      var decorations = form.elements['decorations'].value;

      var specialMessage = document.getElementById('specialMessage').value;
      //var specialMessage = form.elements['specialMessage'].value;

      if (specialMessage == '') {
          specialMessage = 'No Special Message';
      }

    //var size = document.getElementById('')
    //var size = document.querySelector('input[name="size"]:checked').value;
    console.log(size);


    body = "<h2> Request from " + name + "</h2> <br>" +
          "Size: " + size + '<br>' +
          'Flavour: ' + flavour + '<br>' +
          'Decorations: ' + decorations + '<br>' +
          'Special Message: ' + '<br>' + specialMessage + '<br>';

      Email.send({
        SecureToken: "030798b5-71ee-47b7-a39d-7b93f0725051",
        To : 'signet99@protonmail.com',
        From : "kondrot.m@gmail.com",
        Subject : subject,
        Body : body
      }).then(
          message => {
              if (message == 'OK') {
                  document.getElementById('stepOne').style.display = 'none';
                  document.getElementById('stepTwo').style.display = 'block';
              } else {
              alert(message);
                     } 
          }
      );
  }
  

</script>

<style>
  table, th, td {
      border: 0px solid black;
      padding: 1px;
  }
  table {
      border-spacing: 0px;
      width: 100%;
  }
  textarea {
      width: 100%;
  }
  #stepTwo {
      display: none;
  }


</style>
