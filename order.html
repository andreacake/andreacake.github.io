<html>
  <head>
    <title>Andrea Cake</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  </head>

  <h1 class='heading'><a href="index.html" style="text-decoration: none; color:black">Andrea Cake</a></h1>

  <div id='stepOne'>
  <div class="header-small">
    <img style="
      width: 100%;
      height: 20vw;
      max-height: 150px;
      overflow: hidden;
      object-fit: cover;
      object-position: 50% 42%;
      border: 2px solid black;
    " src="header-full.jpg" alt="Love cake">
  </div>
  <p> Cake ordering for Andrea Cake </p>
  <form onsubmit='nextScreen(event)' id='cakeForm'>

    <fieldset>
      <legend>Your Name</legend>
      <input name='name' id='customerName' placeholder='John Doe'></input>
    </fieldset>
    
    <fieldset>
      <legend>Step One: Select Size</legend>
      <table>
        <tr>
          <td>
            <input type='radio' name='size' value='Small' />
            <label for='small'>Small</label><br>
          </td>
          <td>8 Servings</td>
          <td>8"</td>
          <td>Â£40-50</td>
        </tr>
        <tr>
          <td>
            <input type='radio' name='size' value='Medium' />
            <label for='small'>Medium</label><br>
          </td>
          <td>12 Servings</td>
          <td>10"</td>
          <td>Â£50-60</td>
        </tr>
        <tr>
          <td>
            <input type='radio' name='size' value='Large' />
            <label for='large'>Large</label><br>
          </td>
          <td>16 Servings</td>
          <td>12"</td>
          <td>Â£60+</td>
        </tr>


      </table>
   </fieldset>
    
    <fieldset>
      <legend>Step Two: Select Flavours</legend>
      <table>
        <tr>
          <td>
      <input type='radio' name='flavourOne' value='Chocolate' />
      <label for='chocolate'>Chocolate</label><br>
      <input type='radio' name='flavourOne' value='Vanilla' />
      <label for='vanilla'>Vanilla</label><br>
      <input type='radio' name='flavourOne' value='Caramel' />
      <label for='caramel'>Caramel</label><br>
      <input type='radio' name='flavourOne' value='Blueberry' />
      <label for='blueberry'>Blueberry</label><br>
      <input type='radio' name='flavourOne' value='Strawberry' />
      <label for='strawberry'>Strawberry</label><br>
      <input type='radio' name='flavourOne' value='Raspberry' />
      <label for='raspberry'>Raspberry</label><br>
      <input type='radio' name='flavourOne' value='Nutella' />
      <label for='nutella'>Nutella</label><br>
 </td>
          <td> & </td>
          <td>
      <input type='radio' name='flavourTwo' value='Chocolate' />
      <label for='chocolate'>Chocolate</label><br>
      <input type='radio' name='flavourTwo' value='Vanilla' />
      <label for='vanilla'>Vanilla</label><br>
      <input type='radio' name='flavourTwo' value='Caramel' />
      <label for='caramel'>Caramel</label><br>
      <input type='radio' name='flavourTwo' value='Blueberry' />
      <label for='blueberry'>Blueberry</label><br>
      <input type='radio' name='flavourTwo' value='Strawberry' />
      <label for='strawberry'>Strawberry</label><br>
      <input type='radio' name='flavourTwo' value='Raspberry' />
      <label for='raspberry'>Raspberry</label><br>
      <input type='radio' name='flavourTwo' value='Nutella' />
      <label for='nutella'>Nutella</label><br>

          </td>
        </tr>
      </table>
    </fieldset>

    <fieldset>
      <legend>Step Three: Select Decorations</legend>
      <input type='radio' name='decorations' value='Fresh Fruits' />
      <label for='fruits'>Fresh Fruits</label><br> 
      <input type='radio' name='decorations' value='Fancy Chocolate' />
      <label for='chocolate'>Fancy Chocolate</label><br>
      <input type='radio' name='decorations' value='Cream Ornaments & Flowers' />
      <label for='ornaments'>Cream Ornaments & Flowers</label><br> 
      <input type='radio' name='decorations' value='Custom' />
      <label for='custom'>By Own Choice (Discuss through Messenger)</label><br> 
    </fieldset>

    <!-- TODO: Make date field-->
    <fieldset>
      <legend>Date [Optional]</legend>
      <input type='date' id="dateInput" name='cakeDate' />
    </fieldset>

    <fieldset>
      <legend>Further Comments</legend>
      <textarea placeholder="e.g. Cake for my son's birthday!" id='specialMessage' name='comment'></textarea>
    </fieldset>

    <button type='submit' class='submitButton'>Send</button>

  </form>
  </div>

  <div id='stepTwo'>
    <h1>Thank You! ðŸŽ‰</h1>
    <p>Please take a <b>screenshot</b> of this page and send it through messenger.</p>
    <p>You can contact me through Facebook <a target="_blank" href='https://www.facebook.com/kondrotcake'>here</a> or through my e-mail, andrea.kondrotova@gmail.com</p>

    <fieldset>
      <legend>Your Name</legend>
      <input disabled name='name' id='finalCustomerName' placeholder='John Doe'></input>
    </fieldset>
    
    <fieldset>
      <legend>Size</legend>
      <table id="finalTableSize">
        <tr>
          <td>
            <input checked type='radio' name='finalSize' value='Small' />
            <label id='sizeLabel' for=''></label><br>
          </td>
          <td id="finalServings"></td>
          <td id="finalInches"></td>
          <td id="finalPrice"></td>
        </tr>
     </table>
    </fieldset>

    <fieldset>
      <legend id="flavoursLegend">Flavours</legend>
      <table>
        <tr id="finalFlavourRow">
          <td id="finalFlavourOne">
            <input checked type='radio' name='finalFlavourOne' value='' />
            <label id="flavourOneLabel" for=''></label><br>
          </td>
          <td id="finalFlavourAnd"> & </td>
          <td id="finalFlavourTwo">
            <input checked type='radio' name='finalFlavourTwo' value='' />
            <label id="flavourTwoLabel" for=''></label><br>
          </td>
        </tr>
      </table>
    </fieldset>

    <fieldset>
      <legend>Decorations</legend>
      <input checked type='radio' name='finalDecorations' value='' />
      <label id='finalDecorations' for=''></label>
    </fieldset>

    <fieldset id="finalDate">
      <legend>Date</legend>
      <input disabled type='date' id="finalDateInput" />
    </fieldset>

    <fieldset>
      <legend>Further Comments</legend>
      <textarea disabled id="finalComment" placeholder="" name='comment'></textarea>
    </fieldset>

    <!-- <button onclick='prevScreen()' class='submitButton'>Edit</button> -->


  </div>



</html>
<script src="https://smtpjs.com/v3/smtp.js">
</script>

<script>
  function nextScreen(e) {
    e.preventDefault();

    // Parse name
    let name = document.getElementById('customerName').value;

    document.getElementById('finalCustomerName').value = name


    // Parse size
    sizeLookup = {
      'Small' : ['Small','8 Servings', '8"', 'Â£40-50'],
      'Medium' : ['Medium','12 Servings', '10"', 'Â£50-60'],
      'Large' : ['Large','16 Servings', '12"', 'Â£60+'],
    }

    let size = document.querySelector('input[name="size"]:checked').value;
    size = sizeLookup[size];
    
    let specialMessage;

    document.getElementById('sizeLabel').innerHTML = size[0]
    document.getElementById('finalServings').innerHTML = size[1]
    document.getElementById('finalInches').innerHTML = size[2]
    document.getElementById('finalPrice').innerHTML = size[3]


    // Parse flavours
    let flavourOne = document.querySelector('input[name="flavourOne"]:checked').value;

    document.getElementById('flavourOneLabel').innerHTML = flavourOne;

    let flavourTwo;
    let singleFlavour;
    try {
      flavourTwo = document.querySelector('input[name="flavourTwo"]:checked').value;
      document.getElementById('flavourTwoLabel').innerHTML = flavourTwo;
      singleFlavour = false;
    } catch (error) {
      singleFlavour = true;
      document.getElementById('flavoursLegend').innerHTML = 'Flavour';
      document.getElementById('finalFlavourRow').removeChild(
        document.getElementById('finalFlavourAnd')
      );
      document.getElementById('finalFlavourRow').removeChild(
        document.getElementById('finalFlavourTwo')
      );
    }


    // Parse decorations
    let decorations = document.querySelector('input[name="decorations"]:checked').value;

    document.getElementById('finalDecorations').innerHTML = decorations;


    // Parse date
    let date = document.getElementById('dateInput').value;

    document.getElementById('finalDateInput').value = date;

    // Parse comment
    let comment = document.getElementById('specialMessage').value;

    document.getElementById('finalComment').value = comment;



    // Get value of each selection
    // Append relevant values to html div
    // Add flavour text
    



    document.getElementById('stepOne').style.display = 'none';
    document.getElementById('stepTwo').style.display = 'block';


  }

  function sendMail(e) {
      e.preventDefault();
      var subject;
      var body;

      var name = document.getElementById('customerName').value;
      if (name == '') {
          name = 'Customer'
      }

      subject = 'New Cake Request from ' + name;

      var form = document.getElementById('cakeForm');
      var size = form.elements['size'].value;
      var flavourOne = form.elements['flavourOne'].value;
      var flavourTwo = form.elements['flavourTwo'].value;
      var decorations = form.elements['decorations'].value;
      var cakeDate = form.elements['cakeDate'].value;

      var specialMessage = form.elements['specialMessage'].value;

      if (specialMessage == '') {
          specialMessage = 'No Special Message';
      }

      body = "<h2> Request from " + name + "</h2> <br>" +
          'Date for: ' + cakeDate + '<br>' + 
          "Size: " + size + '<br>' +
          'First Flavour: ' + flavourOne + '<br>' +
          'Second Flavour: ' + flavourTwo + '<br>' +
          'Decorations: ' + decorations + '<br>' +
          'Special Message: ' + '<br>' + specialMessage + '<br>';

      Email.send({
        SecureToken: "030798b5-71ee-47b7-a39d-7b93f0725051",
        To : 'andrea.kondrotova@gmail.com',
        From : "kondrot.m@gmail.com",
        Subject : subject,
        Body : body
      }).then(
          message => {
              if (message == 'OK') {
                  document.getElementById('stepOne').style.display = 'none';
                  document.getElementById('stepTwo').style.display = 'block';
              } else {
              alert(message);
                     } 
          }
      );
  }
  

</script>

<style>
  table, th, td {
      border: 0px solid black;
      padding: 1px;
  }
  table {
      border-spacing: 0px;
      width: 100%;
  }
  textarea {
      width: 100%;
  }
  #stepTwo {
      display: none;
  }
  .heading {
      text-align: center;
  }
  .submitButton {
      background-color: #F2F3F4;
      border: solid;
      width: 100%;
      display: block;
      height: 3em;
      margin-top: .8em;
      transition-duration: 0.3s;
  }
  .submitButton:hover {
      background-color: #D7DBDD
      
  }


</style>
